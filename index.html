<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>20 Questions Animal Game</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        const { HelpCircle, Sparkles, RotateCcw } = lucide;

        const animals = [
          {
            name: "Dog",
            clues: {
              "Does it have fur?": true,
              "Does it live in water?": false,
              "Can it fly?": false,
              "Is it a pet?": true,
              "Does it have four legs?": true,
              "Does it meow?": false,
              "Does it bark?": true,
              "Is it bigger than a car?": false,
              "Does it eat meat?": true,
              "Can you ride it?": false
            }
          },
          {
            name: "Elephant",
            clues: {
              "Does it have fur?": false,
              "Does it live in water?": false,
              "Can it fly?": false,
              "Is it a pet?": false,
              "Does it have four legs?": true,
              "Does it have a trunk?": true,
              "Is it bigger than a car?": true,
              "Does it eat meat?": false,
              "Can you ride it?": true,
              "Does it live in Africa?": true
            }
          },
          {
            name: "Goldfish",
            clues: {
              "Does it have fur?": false,
              "Does it live in water?": true,
              "Can it fly?": false,
              "Is it a pet?": true,
              "Does it have four legs?": false,
              "Does it have fins?": true,
              "Is it bigger than a car?": false,
              "Does it eat meat?": false,
              "Can you hold it in your hand?": true,
              "Does it live in the ocean?": false
            }
          },
          {
            name: "Penguin",
            clues: {
              "Does it have fur?": false,
              "Does it live in water?": false,
              "Can it fly?": false,
              "Is it a pet?": false,
              "Does it have four legs?": false,
              "Does it have wings?": true,
              "Can it swim?": true,
              "Does it live in cold places?": true,
              "Is it black and white?": true,
              "Does it eat fish?": true
            }
          },
          {
            name: "Butterfly",
            clues: {
              "Does it have fur?": false,
              "Does it live in water?": false,
              "Can it fly?": true,
              "Is it a pet?": false,
              "Does it have four legs?": false,
              "Does it have wings?": true,
              "Is it colorful?": true,
              "Is it an insect?": true,
              "Is it bigger than a car?": false,
              "Does it drink nectar from flowers?": true
            }
          },
          {
            name: "Rabbit",
            clues: {
              "Does it have fur?": true,
              "Does it live in water?": false,
              "Can it fly?": false,
              "Is it a pet?": true,
              "Does it have four legs?": true,
              "Does it hop?": true,
              "Does it have long ears?": true,
              "Does it eat carrots?": true,
              "Is it bigger than a car?": false,
              "Does it live in a burrow?": true
            }
          }
        ];

        function TwentyQuestionsGame() {
          const [currentAnimal, setCurrentAnimal] = useState(animals[Math.floor(Math.random() * animals.length)]);
          const [questionsAsked, setQuestionsAsked] = useState(0);
          const [gameStatus, setGameStatus] = useState('playing');
          const [userQuestion, setUserQuestion] = useState('');
          const [conversationHistory, setConversationHistory] = useState([]);
          const [guess, setGuess] = useState('');

          const startNewGame = () => {
            setCurrentAnimal(animals[Math.floor(Math.random() * animals.length)]);
            setQuestionsAsked(0);
            setGameStatus('playing');
            setUserQuestion('');
            setGuess('');
            setConversationHistory([]);
          };

          const askQuestion = () => {
            if (!userQuestion.trim() || questionsAsked >= 20 || gameStatus !== 'playing') return;

            const question = userQuestion.trim();
            let answer = "Hmm, I'm not sure about that one. Try a different question!";
            
            const questionLower = question.toLowerCase();

            for (const [clueQuestion, clueAnswer] of Object.entries(currentAnimal.clues)) {
              if (questionLower.includes(clueQuestion.toLowerCase().replace(/does it |can it |is it /gi, ''))) {
                answer = clueAnswer ? "Yes! âœ“" : "No! âœ—";
                break;
              }
            }

            const newHistory = [...conversationHistory, { question, answer, questionNum: questionsAsked + 1 }];
            setConversationHistory(newHistory);
            setQuestionsAsked(questionsAsked + 1);
            setUserQuestion('');

            if (questionsAsked + 1 >= 20) {
              setGameStatus('outOfQuestions');
            }
          };

          const makeGuess = () => {
            if (!guess.trim()) return;

            if (guess.toLowerCase() === currentAnimal.name.toLowerCase()) {
              setGameStatus('won');
            } else {
              const newHistory = [...conversationHistory, { 
                question: `Is it a ${guess}?`, 
                answer: "No! Keep trying!", 
                questionNum: questionsAsked + 1 
              }];
              setConversationHistory(newHistory);
              setQuestionsAsked(questionsAsked + 1);
              setGuess('');
              
              if (questionsAsked + 1 >= 20) {
                setGameStatus('outOfQuestions');
              }
            }
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-purple-400 via-pink-300 to-blue-300 p-4 sm:p-8">
              <div className="max-w-2xl mx-auto">
                <div className="bg-white rounded-3xl shadow-2xl p-6 sm:p-8">
                  <div className="text-center mb-6">
                    <div className="flex items-center justify-center gap-2 mb-2">
                      <Sparkles className="text-yellow-500" size={32} />
                      <h1 className="text-3xl sm:text-4xl font-bold text-purple-600">20 Questions!</h1>
                      <Sparkles className="text-yellow-500" size={32} />
                    </div>
                    <p className="text-gray-600 text-sm sm:text-base">I'm thinking of an animal. Can you guess it?</p>
                  </div>

                  {gameStatus === 'playing' && (
                    <div className="mb-6">
                      <div className="bg-purple-100 rounded-xl p-4 mb-4">
                        <p className="text-center text-purple-800 font-semibold">
                          Questions left: {20 - questionsAsked}
                        </p>
                      </div>

                      <div className="space-y-4">
                        <div>
                          <label className="block text-gray-700 font-medium mb-2">Ask a Yes/No Question:</label>
                          <div className="flex gap-2">
                            <input
                              type="text"
                              value={userQuestion}
                              onChange={(e) => setUserQuestion(e.target.value)}
                              onKeyPress={(e) => e.key === 'Enter' && askQuestion()}
                              placeholder="Does it have fur?"
                              className="flex-1 px-4 py-3 border-2 border-purple-300 rounded-xl focus:outline-none focus:border-purple-500"
                            />
                            <button
                              onClick={askQuestion}
                              className="bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-xl font-semibold transition-colors"
                            >
                              Ask
                            </button>
                          </div>
                        </div>

                        <div className="text-center text-gray-500">OR</div>

                        <div>
                          <label className="block text-gray-700 font-medium mb-2">Make a Guess:</label>
                          <div className="flex gap-2">
                            <input
                              type="text"
                              value={guess}
                              onChange={(e) => setGuess(e.target.value)}
                              onKeyPress={(e) => e.key === 'Enter' && makeGuess()}
                              placeholder="Is it a dog?"
                              className="flex-1 px-4 py-3 border-2 border-green-300 rounded-xl focus:outline-none focus:border-green-500"
                            />
                            <button
                              onClick={makeGuess}
                              className="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-xl font-semibold transition-colors"
                            >
                              Guess
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  )}

                  {gameStatus === 'won' && (
                    <div className="mb-6 bg-green-100 rounded-xl p-6 text-center">
                      <p className="text-2xl font-bold text-green-700 mb-2">ðŸŽ‰ You got it!</p>
                      <p className="text-green-600">The answer was: <span className="font-bold">{currentAnimal.name}</span></p>
                      <p className="text-green-600 mt-2">You used {questionsAsked} questions!</p>
                    </div>
                  )}

                  {gameStatus === 'outOfQuestions' && (
                    <div className="mb-6 bg-orange-100 rounded-xl p-6 text-center">
                      <p className="text-2xl font-bold text-orange-700 mb-2">Out of questions!</p>
                      <p className="text-orange-600">The answer was: <span className="font-bold">{currentAnimal.name}</span></p>
                      <p className="text-orange-600 mt-2">Better luck next time!</p>
                    </div>
                  )}

                  {conversationHistory.length > 0 && (
                    <div className="mb-6">
                      <h3 className="font-bold text-gray-700 mb-3 flex items-center gap-2">
                        <HelpCircle size={20} />
                        Your Questions:
                      </h3>
                      <div className="bg-gray-50 rounded-xl p-4 max-h-64 overflow-y-auto space-y-2">
                        {conversationHistory.map((item, index) => (
                          <div key={index} className="bg-white rounded-lg p-3 shadow-sm">
                            <p className="text-gray-800 font-medium">Q{item.questionNum}: {item.question}</p>
                            <p className="text-purple-600 font-semibold mt-1">{item.answer}</p>
                          </div>
                        ))}
                      </div>
                    </div>
                  )}

                  <button
                    onClick={startNewGame}
                    className="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-4 rounded-xl font-bold text-lg transition-all flex items-center justify-center gap-2 shadow-lg"
                  >
                    <RotateCcw size={24} />
                    New Game
                  </button>

                  <div className="mt-6 bg-blue-50 rounded-xl p-4">
                    <p className="text-sm text-gray-600 text-center">
                      <strong>Tip:</strong> Ask questions like "Does it live in water?" or "Can it fly?" to narrow down your guess!
                    </p>
                  </div>
                </div>
              </div>
            </div>
          );
        }

        ReactDOM.render(<TwentyQuestionsGame />, document.getElementById('root'));
    </script>
</body>
</html>
